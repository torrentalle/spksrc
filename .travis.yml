# Travis config file tu build spk package

sudo: required
language: false

# Build environment configuration
env:
  global:
    - PKG=gogs
  matrix:
    - SYNOARCH=invalid-arch

# spksrc docker image
services:
  - docker

before_install:
  - docker pull synocommunity/spksrc

# Build spk package
script:
  - docker run -it -v `pwd`:/spksrc synocommunity/spksrc /bin/bash -c "cd /spksrc && make setup && cd spk/$PKG && make arch-$SYNOARCH"
  # make arch-$SYNOARCH always return exit code 0. This line is to test that SPK has been build. 
  - ls packages/${PKG}_${SYNOARCH}*.spk
